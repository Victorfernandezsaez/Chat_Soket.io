(()=>{function l(e,t){return typeof e!="string"||typeof t!="string"?!1:e.length>=t.length&&e.slice(e.length-t.length)===t}function h(e,t){return Array.isArray(e)?typeof t!="function"?[...e]:e.filter(t):[]}function u(){let e=document.getElementById("hamburger-icon"),t=document.getElementById("hamburgerLinks");!e||!t||(e.addEventListener("click",n=>{n.stopPropagation();let r=t.style.display==="block";t.style.display=r?"none":"block",e.setAttribute("aria-expanded",!r)}),document.addEventListener("click",n=>{!t.contains(n.target)&&!e.contains(n.target)&&(t.style.display="none",e.setAttribute("aria-expanded","false"))}))}function f(e){let t=document.createElement("div");t.className="navbar-error",t.textContent=`Navigation Error: ${e}`,t.style.cssText=`
    padding: 1rem;
    background: #ffebee;
    color: #c62828;
    border: 1px solid #c62828;
    margin: 0.5rem;
  `,document.body.prepend(t),setTimeout(()=>t.remove(),5e3)}function y(){try{let e=window.location.pathname+window.location.search,t=document.querySelectorAll("#navbar a, #hamburgerLinks a");if(!t.length)return;let n=Array.from(t);h(n,a=>a.href).forEach(a=>{let c=new URL(a.href),i=c.pathname+c.search,o=e===i||l(e,"/")&&e.slice(0,-1)===i||l(i,"/")&&e===i.slice(0,-1);a.classList.toggle("active",o),o&&a.setAttribute("aria-current","page")})}catch(e){console.warn("Active link highlighting failed:",e)}}async function m(){try{let e=await fetch("../Navbar/navbar.html");if(!e.ok)throw new Error(`HTTP ${e.status}`);let t=await e.text(),n=document.getElementById("navbar-placeholder");if(!n)throw new Error("Navbar placeholder not found");n.innerHTML=t,u(),y();let r=document.getElementById("logo-icon");r&&r.addEventListener("click",()=>{window.location.href="?page=landing"})}catch(e){console.error("Navbar loading failed:",e),f(e.message)}}function b(e){let t=document.createElement("div");t.className="navbar-error",t.textContent=`Navigation Error: ${e}`,t.style.cssText=`
    padding: 1rem;
    background: #ffebee;
    color: #c62828;
    border: 1px solid #c62828;
    margin: 0.5rem;
  `}async function p(){try{let e=await fetch("../Footer/index.html");if(!e.ok)throw new Error(`HTTP ${e.status}`);let t=await e.text(),n=document.getElementById("footer-placeholder");if(!n)throw new Error("Footer placeholder not found");n.innerHTML=t}catch(e){console.error("Navbar loading failed:",e),b(e.message)}}document.addEventListener("click",e=>{if(e.target.id==="impresum"||e.target.id==="datenschutz"){let t=document.getElementById("modal"),n=document.getElementById("modal-text");n.innerHTML=w(e.target.id),t.classList.remove("hidden"),t.style.display="block"}(e.target.id==="close-modal"||e.target.id==="modal")&&(document.getElementById("modal").classList.add("hidden"),document.getElementById("modal").style.display="none")});function w(e){return e==="impresum"?`
        <h2>Impressum</h2>
        <p>Hier steht das Impressum deiner Website. Z.B. Name, Adresse, Kontaktinformationen.</p>
      `:e==="datenschutz"?`
        <h2>Datenschutzerkl\xE4rung</h2>
        <p>Hier findest du Informationen dar\xFCber, wie mit deinen Daten umgegangen wird.</p>
      `:""}document.addEventListener("DOMContentLoaded",async()=>{await m(),await p();let t=new URLSearchParams(window.location.search).get("page")||"landing",n=document.getElementById("main-content"),r=E(t),a=`${t}.js`,c="page-style",i=document.getElementById(c);if(i)i.href=`./pages/${r}/style.css`;else{let o=document.createElement("link");o.id=c,o.rel="stylesheet",o.href=`./pages/${r}/style.css`,document.head.appendChild(o)}try{let o=await fetch(`./pages/${r}/index.html`);if(!o.ok)throw new Error(`Page ${t} not found`);let g=await o.text();n.innerHTML=g;let s=document.createElement("script");if(a==="weltkarte.js"){let d=document.createElement("script");d.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",d.integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=",d.crossOrigin="",d.onload=()=>{s.src=`./pages/${r}/${a}`,document.body.appendChild(s)},document.body.appendChild(d)}else s.type="module",s.src=`./pages/${r}/${a}`,document.body.appendChild(s);document.body.appendChild(s)}catch(o){n.innerHTML=`<p style="color:red">Error loading page: ${o.message}</p>`}});function E(e){return e.charAt(0).toUpperCase()+e.slice(1)}})();
